webpackJsonp([166],{"GZ/G":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={name:"tabletest",data:function(){return{url:"",tag_id:0,breadcrumb:[{name:"网站管理"},{name:"标签管理/标签列表",url:"/manage/label"},{name:"添加标签",url:"/manage/label/add?id=0"}],groupList:[],tagList:[],ruleForm:{tag_name:"",tag_remark:"",tag_fid:"",tag_group_id:"",tag_friends:[]},rules:{tag_name:[{required:!0,message:"请输入标签名字",trigger:"blur"}],tag_remark:[{required:!0,message:"请输入备注",trigger:"blur"}]}}},methods:{getDetailInfo:function(t){var e=this;this.$axios({method:"get",url:"/api/admin/tag/tagDetail",params:{id:t}}).then(function(t){var a=t.data.data;e.ruleForm.tag_name=a.tag_name,e.ruleForm.tag_remark=a.tag_remark,e.ruleForm.tag_fid=a.tag_fid,e.ruleForm.tag_group_id=a.tag_group_id,e.ruleForm.tag_friends=a.tag_friends_name.split(",")}).catch(function(t){})},getGroupList:function(){var t=this;this.$axios.get("/api/admin/tag/groupList").then(function(e){t.groupList=e.data.data,console.log(t.groupList)})},getTagList:function(){var t=this;this.$axios.get("/api/admin/tag/tagList").then(function(e){t.tagList=e.data.data,console.log(t.groupList)})},submit:function(){var t=this;this.$axios.post("/api/admin/tag/createTag",this.ruleForm).then(function(e){0==e.data.code?(t.$message({message:"恭喜你，添加成功！",type:"success"}),t.$router.push("/manage/label")):t.$message({message:e.data.msg,type:"error"})})}},components:{BreadCrumb:a("tVcc").a},created:function(){this.getGroupList(),this.getTagList(),this.tag_id=Number(this.$route.query.id),this.tag_id&&this.getDetailInfo(this.tag_id)},computed:{}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-header"},[a("div",{staticClass:"crumbs"},[a("bread-crumb",{attrs:{"bread-crumb":t.breadcrumb}})],1)]),t._v(" "),a("div",{staticClass:"page-content"},[a("div",{staticClass:"panel"},[a("div",{staticClass:"form-panel p-xl"},[a("el-form",{ref:"ruleForm1",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"名称",prop:"tag_name"}},[a("el-input",{model:{value:t.ruleForm.tag_name,callback:function(e){t.$set(t.ruleForm,"tag_name",e)},expression:"ruleForm.tag_name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"所在组",prop:"tag_group_id"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.ruleForm.tag_group_id,callback:function(e){t.$set(t.ruleForm,"tag_group_id",e)},expression:"ruleForm.tag_group_id"}},t._l(t.groupList,function(t,e){return a("el-option",{key:t.tag_group_id,attrs:{label:t.tag_group_name,value:t.tag_group_id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"上级标签",prop:"tag_fid"}},[a("el-select",{attrs:{placeholder:"请选择关联标签"},model:{value:t.ruleForm.tag_fid,callback:function(e){t.$set(t.ruleForm,"tag_fid",e)},expression:"ruleForm.tag_fid"}},t._l(t.tagList,function(t,e){return a("el-option",{key:t.tag_id,attrs:{label:t.tag_name,value:t.tag_id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"关联标签",prop:"name"}},[a("el-select",{attrs:{multiple:"",placeholder:"请选择关联标签"},model:{value:t.ruleForm.tag_friends,callback:function(e){t.$set(t.ruleForm,"tag_friends",e)},expression:"ruleForm.tag_friends"}},t._l(t.tagList,function(t,e){return a("el-option",{key:t.tag_id,attrs:{label:t.tag_name,value:t.tag_id}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"备注",prop:"tag_remark"}},[a("el-input",{model:{value:t.ruleForm.tag_remark,callback:function(e){t.$set(t.ruleForm,"tag_remark",e)},expression:"ruleForm.tag_remark"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"large",type:"primary"},on:{click:t.submit}},[t._v("提交")])],1)],1)],1)])])])},staticRenderFns:[]};var l=a("VU/8")(r,i,!1,function(t){a("i5BR")},"data-v-05442042",null);e.default=l.exports},i5BR:function(t,e){}});