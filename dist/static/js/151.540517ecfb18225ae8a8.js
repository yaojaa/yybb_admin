webpackJsonp([151],{KuWI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("bOdI"),i=a.n(s),l=a("gRE1"),n=a.n(l),o=a("fZjL"),r=a.n(o),u=a("0qDT"),p=a("PMOO"),c=a("tVcc"),d={data:function(){return{breadcrumb:[{name:"企业管理"},{name:"门店列表",url:"/shop/list"}],user:JSON.parse(localStorage.user),dialog:!1,business_id:"",is_use:"",remark:"无",currentItem:{},status_filter:"",tagsListGroup:{"选择类型:":[{title:"全部",key:"business_type",value:""},{title:"母店",key:"shop_type",value:0},{title:"子店",key:"business_type",value:1}],"选择状态:":[{title:"全部",key:"shop_is_use",value:""},{title:"停用",key:"shop_is_use",value:0},{title:"启用",key:"shop_is_use",value:1}]},searchs:{list:[{type:"input-text",label:"公司名称",name:"shop_name",value:"",placeholder:"公司名称"},{type:"input-text",label:"企业名称",name:"business_name",value:"",placeholder:"企业名称"},{type:"input-text",label:"法人姓名",name:"shop_corporation",value:"",placeholder:""},{type:"input-text",label:"城市",name:"city_name",value:""},{type:"input-singal-date",label:"开始时间",name:"start_time",value:""},{type:"input-singal-date",label:"结束时间",name:"end_time",value:""}]},url:"/api/admin/shop/index",tableJson:{column:[{type:"text",align:"center",label:"添加时间",prop:"shop_ctime",width:""},{type:"text",align:"center",label:"公司名称",prop:"shop_name",width:""},{type:"text",align:"center",label:"法人姓名/手机号",prop:"shop_corporation",width:"200",formatter:function(e){return"<p style='text-align: center'>\n                                "+e.shop_corporation+"<br/>\n                                "+e.shop_phone+"\n                                                    </p>"}},{type:"text",align:"center",label:"类型",width:"",formatter:function(e){return 1==e.shop_type?"子店":"母店"}},{type:"text",align:"center",label:"公司地址",prop:"shop_address",width:"200"},{type:"text",align:"center",label:"归属企业",prop:"business_name"},{type:"text",align:"center",label:"状态",width:"",formatter:function(e){return'<div style="color:red">\n                                '+(0==e.shop_is_use?"停用":"启用")+"\n                                </div>"}},{type:"switch_btn",label:"操作",align:"center",width:"50",prop:"shop_is_use",value:["停用","启用"]},{type:"handle",label:"查看",align:"center",width:"150",list:[{label:"修改",type:"edit",onClick:function(e,t,a){console.log(a,"row"),t.$router.push("/shop/add/"+a.shop_id)}},{label:"详情",type:"detail",onClick:function(e,t,a){t.$router.push("/shop/detail/"+a.shop_id)}}]}]}}},components:{NomalTable:u.a,TableSearch:p.a,BreadCrumb:c.a},beforeRouteUpdate:function(e,t,a){console.log(e.query),this.status_filter=r()(e.query)[0]+n()(e.query)[0],this.$refs.table.getData(e.query),a()},created:function(){},computed:{},methods:{listenSwitchChange:function(e){var t=e.value,a=t.shop_id,s=t.shop_is_use;console.log(e.value,"data.value"),this.shop_id=a,this.is_use=1==s?0:1,console.log(this.is_use),this.dialog=!0},doUpdateIsUse:function(){var e=this,t={id:this.shop_id,is_use:this.is_use,remark:this.remark};this.$axios.post("/api/admin/shop/isUse",t).then(function(t){e.dialog=!1,console.log(t),0==t.data.code?(e.$alert("操作成功"+t.data.data),e.$refs.table.getData({is_page:1,page:1})):e.$alert("操作失败"+t.data.msg)}).catch(function(t){e.$alert("操作失败"+t)})},openModal:function(){console.log("openModal")},getData:function(e,t){this.$refs.table.getData(i()({},e,t))}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-header"},[a("div",{staticClass:"crumbs"},[a("bread-crumb",{attrs:{"bread-crumb":e.breadcrumb}})],1),e._v(" "),a("div",{staticClass:"page-header-actions"},[a("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(t){e.$router.push({path:"/audit/shop"})}}},[e._v("门店审核")]),e._v(" "),a("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(t){e.$router.push({path:"/shop/add"})}}},[e._v("添加门店")])],1)]),e._v(" "),a("div",{staticClass:"page-content"},[a("div",{staticClass:"filter-tag-box"},e._l(e.tagsListGroup,function(t,s,i){return a("div",{key:i,staticClass:"filter-tag-item"},[a("div",{staticClass:"tag-hd"},[e._v(e._s(s))]),e._v(" "),a("div",{staticClass:"tag-bd"},e._l(t,function(t,s){return a("router-link",{key:t.value,staticClass:"tag",class:t.key+t.value==e.status_filter?"active":"",attrs:{to:{path:"/shop/list",query:(i={},i[t.key]=t.value,i)}}},[e._v("\n                        "+e._s(t.title))]);var i}))])})),e._v(" "),a("nomal-table",{ref:"table",attrs:{"table-json":e.tableJson,url:e.url},on:{listenSwitchChange:e.listenSwitchChange}},[a("table-search",{attrs:{searchs:e.searchs}})],1),e._v(" "),a("el-dialog",{attrs:{title:0==e.is_use?"停用":"启用",visible:e.dialog,width:"30%"},on:{"update:visible":function(t){e.dialog=t}}},[a("p",{staticStyle:{color:"red"}},[e._v("此操作会"+e._s(0==e.is_use?"停用":"启用")+"门店")]),e._v(" "),a("p",[e._v("操作人:"+e._s(e.user.data.user_realname))]),e._v(" "),a("p",[e._v("操作备注:")]),e._v(" "),a("p",[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入操作备注"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.doUpdateIsUse}},[e._v("确 定")])],1)])],1)])},staticRenderFns:[]};var _=a("VU/8")(d,h,!1,function(e){a("jWYN")},"data-v-21e3ad6a",null);t.default=_.exports},jWYN:function(e,t){}});