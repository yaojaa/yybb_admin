webpackJsonp([93],{"85xR":function(e,t){},i3L5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("bOdI"),i=a.n(l),r=a("gRE1"),n=a.n(r),s=a("fZjL"),o=a.n(s),u=a("0qDT"),d=a("PMOO"),c=a("tVcc"),p={name:"userList",components:{NomalTable:u.a,TableSearch:d.a,BreadCrumb:c.a},data:function(){return{breadcrumb:[{name:"用户管理"},{name:"美丽档案",url:"/user/beautifulList"}],status_filter:"",freeze:null,dialog:!1,beauty_id:"",tagsListGroup:{"选择状态:":[{title:"未冻结",key:"freeze",value:1},{title:"已冻结",key:"freeze",value:2}]},searchs:{list:[{type:"input-text",label:"用户名",name:"user_name",value:"",placeholder:"用户名"},{type:"input-text",label:"手机号",name:"user_phone",value:"",placeholder:"手机号"},{type:"input-text",label:"档案ID",name:"id",value:"",placeholder:"档案ID"},{type:"input-singal-date",label:"开始时间",name:"start_time",value:""},{type:"input-singal-date",label:"结束时间",name:"end_time",value:""}]},tableJson:{column:[{type:"text",align:"center",label:"档案ID",prop:"_id",width:""},{type:"text",align:"center",label:"创建时间",prop:"create_time",width:""},{type:"text",align:"center",label:"内容",prop:"content",width:""},{type:"text",align:"center",label:"用户/手机号",width:"",formatter:function(e){var t="<div>";return t+="<p>"+e.order_detail_order_user_name+"</p>",t+="<p>"+e.order_detail_order_user_phone+"</p>",t+="</div>"}},{type:"text",align:"center",label:"状态",prop:"",width:"",formatter:function(e){return'<div style="color:red">\n                                '+(1==e.freeze?"未冻结":"已冻结")+"\n                                </div>"}},{type:"switch_button",label:"操作",align:"center",width:"50",prop:"freeze",value:["冻结","解冻"]},{type:"handle",label:"查看",align:"center",width:"200",list:[{label:"查看详情",url:"/user/beautifulDetail",query:"beauty_id"}]}]}}},beforeRouteUpdate:function(e,t,a){console.log(e.query),this.status_filter=o()(e.query)[0]+n()(e.query)[0],console.log(this.status_filter),this.$refs.table.getData(e.query),a()},created:function(){console.log("created")},computed:{},methods:{listenSwitchChange:function(e){var t=e.value,a=t.beauty_id,l=t.freeze;this.freeze=1==l?2:1,this.dialog=!0,this.beauty_id=a},doUpdateIsUse:function(){var e=this,t={id:this.beauty_id,freeze:this.freeze};this.$axios.post("/api/admin/beautydiary/freeze",t).then(function(t){e.dialog=!1,console.log(t),0==t.data.code?(e.$refs.table.getData({is_page:1,page:1}),e.$alert(t.data.data)):e.$alert(t.data.msg)}).catch(function(t){e.$alert("操作失败"+t)})},getData:function(e,t){this.$refs.table.getData(i()({},e,t))}}},b={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-header"},[a("bread-crumb",{attrs:{"bread-crumb":e.breadcrumb}})],1),e._v(" "),a("div",{staticClass:"page-content"},[a("div",{staticClass:"filter-tag-box"},e._l(e.tagsListGroup,function(t,l,i){return a("div",{key:i,staticClass:"filter-tag-item"},[a("div",{staticClass:"tag-hd"},[e._v(e._s(l))]),e._v(" "),a("div",{staticClass:"tag-bd"},e._l(t,function(t){return a("router-link",{key:t.value,staticClass:"tag",class:t.key+t.value==e.status_filter?"active":"",attrs:{to:{path:"/user/beautifulLIst",query:(l={},l[t.key]=t.value,l)}}},[e._v("\n                        "+e._s(t.title))]);var l}))])})),e._v(" "),a("nomal-table",{ref:"table",attrs:{"table-json":e.tableJson,url:"/api/admin/beautydiary/index"},on:{listenSwitchChange:e.listenSwitchChange}},[a("table-search",{attrs:{searchs:e.searchs}})],1),e._v(" "),a("el-dialog",{attrs:{title:2==e.freeze?"冻结":"解冻",visible:e.dialog,width:"30%"},on:{"update:visible":function(t){e.dialog=t}}},[a("p",{staticStyle:{color:"red"}},[e._v("此操作会"+e._s(2==e.freeze?"冻结":"解冻")+"门店")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.doUpdateIsUse}},[e._v("确 定")])],1)])],1)])},staticRenderFns:[]};var f=a("VU/8")(p,b,!1,function(e){a("85xR")},"data-v-63eeb811",null);t.default=f.exports}});