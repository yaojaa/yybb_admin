webpackJsonp([5],{IlfG:function(t,e){},"kX/6":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("fZjL"),s=i.n(a),l=i("bOdI"),r=i.n(l),o={name:"tabletest",data:function(){var t;return t={index:"",gitfNumber:"",radioGoodsId:"",imageUrl:"",dialogImageUrl:""},r()(t,"radioGoodsId",""),r()(t,"date",""),r()(t,"activeId",""),r()(t,"goodsList",{}),r()(t,"checkedGoods",{}),r()(t,"checkedGoodsId",""),r()(t,"tabPosition","left"),r()(t,"limit_total_times",""),r()(t,"step",1),r()(t,"industryForm",[{name:"通用券",type:1},{name:"行业券",type:2},{name:"服务券",type:3},{name:"商品券",type:4},{name:"虚拟商品券",type:5}]),r()(t,"itemLIst",[{name:"奖品名次",index:1},{name:"奖品",index:2},{name:"奖品图",index:3},{name:"奖品数量",index:4}]),r()(t,"breadcrumb",[{name:"营销管理/营销应用",url:"/marketing/markList"},{name:"你变美我买单",url:"/marketing/pay_bill/list"},{name:"添加"}]),r()(t,"ruleForm",{activity_title:"",activity_subject:"",activity_desc:"",activity_img:"",activity_status:2,activity_start_time:"",activity_end_time:"",rules:{beautiful:[{index:0,gifts:"",gifts_img:"",gifts_num:"",type_title:"第一名"},{index:1,gifts:"",gifts_img:"",gifts_num:"",type_title:"第2-10名"},{index:2,gifts:"",gifts_img:"",gifts_num:"",type_title:"第11-100名"},{index:3,gifts:"",gifts_img:"",gifts_num:"",type_title:"参与用户"}]}}),r()(t,"rules",{activity_title:[{required:!0,message:"请输入活动名称",trigger:"blur"}],activity_subject:[{required:!0,message:"请输入活动描述",trigger:"blur"}],activity_desc:[{required:!0,message:"请输入活动卖点",trigger:"blur"}]}),t},methods:{uploadActivityImg:function(t){this.ruleForm.activity_img=t.data.url},show_img:function(t,e,i){this.ruleForm.rules.beautiful[t.data.index].gifts_img=e.data.url},goNextStep:function(t){this.step=t},submit:function(){var t=this,e=this.$route.params;this.ruleForm.activity_code=e.activity_code,s()(e).length?this.$axios.post("/api/admin/activity/edit",this.ruleForm).then(function(e){0==e.data.code?(t.$alert(e.data.msg),t.$router.push("/marketing/pay_bill/list")):t.$alert(e.data.msg)}).catch(function(e){t.$alert("操作失败"+e)}):(console.log(this.ruleForm,"choiceLIst"),this.$axios.post("/api/admin/activity/addBeautiful",this.ruleForm).then(function(e){0==e.data.code?(t.$alert(e.data.msg),t.$router.push("/marketing/pay_bill/list")):t.$alert(e.data.msg)}).catch(function(e){t.$alert("操作失败"+e)}))}},mounted:function(){},components:{BreadCrumb:i("tVcc").a},created:function(){var t=this;console.log(this.$route.params,"this.$route.params");var e=this.$route.params;s()(e).length&&this.$axios.post("/api/admin/activity/info",e).then(function(e){console.log(e.data.data,"data----data"),t.ruleForm=e.data.data})},computed:{}},n={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page"},[i("div",{staticClass:"page-header"},[i("div",{staticClass:"crumbs"},[i("bread-crumb",{attrs:{"bread-crumb":t.breadcrumb}})],1)]),t._v(" "),i("div",{staticClass:"page-content"},[i("el-steps",{attrs:{active:t.step,simple:""}},[i("el-step",{attrs:{title:"编辑基本信息",icon:"el-icon-edit"},nativeOn:{click:function(e){t.goNextStep(1)}}}),t._v(" "),i("el-step",{attrs:{title:"编辑详情信息",icon:"el-icon-edit"},nativeOn:{click:function(e){t.goNextStep(2)}}})],1),t._v(" "),i("div",{staticClass:"panel"},[1==t.step?i("div",{staticClass:"form-panel p-xl "},[i("el-form",{ref:"ruleForm1",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"活动名称：",prop:"activity_title"}},[i("el-input",{model:{value:t.ruleForm.activity_title,callback:function(e){t.$set(t.ruleForm,"activity_title",e)},expression:"ruleForm.activity_title"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"活动卖点：",prop:"activity_subject"}},[i("el-input",{model:{value:t.ruleForm.activity_subject,callback:function(e){t.$set(t.ruleForm,"activity_subject",e)},expression:"ruleForm.activity_subject"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"封面图："}},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/admin/fileupload/image","show-file-list":!1,"on-success":t.uploadActivityImg}},[t.ruleForm.activity_img?i("img",{staticClass:"avatar",attrs:{src:t.ruleForm.activity_img}}):i("i",{staticClass:"el-icon-plus avatar-uploader-icon",staticStyle:{"font-size":"48px","margin-top":"15%"}})]),t._v(" "),i("div",{staticClass:"upload-title"},[i("p",{staticClass:"upload-title-red"},[t._v("支持上传一张图片，图片宽高比为1242*1242，支持JPEG、PNG 等大部分图片格式")])])],1),t._v(" "),i("el-form-item",{attrs:{label:"活动规则：",prop:"activity_desc"}},[i("el-input",{attrs:{type:"textarea",rows:"7"},model:{value:t.ruleForm.activity_desc,callback:function(e){t.$set(t.ruleForm,"activity_desc",e)},expression:"ruleForm.activity_desc"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{size:"large",type:"primary"},on:{click:function(e){t.goNextStep(2)}}},[t._v("下一步")])],1)],1)],1):t._e(),t._v(" "),2==t.step?i("div",{staticClass:"form-panel p-xl width720"},[i("el-form",{ref:"ruleForm2",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"160px"}},[i("el-form-item",{attrs:{label:"开始时间："}},[i("el-col",{attrs:{span:10}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.ruleForm.activity_start_time,callback:function(e){t.$set(t.ruleForm,"activity_start_time",e)},expression:"ruleForm.activity_start_time"}})],1),t._v(" "),i("el-col",{staticClass:"line-center",attrs:{span:4}},[t._v("至")]),t._v(" "),i("el-col",{attrs:{span:10}},[i("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:t.ruleForm.activity_end_time,callback:function(e){t.$set(t.ruleForm,"activity_end_time",e)},expression:"ruleForm.activity_end_time"}})],1)],1)],1),t._v(" "),i("p",{staticClass:"gift-title"},[t._v("设置奖品")]),t._v(" "),i("p",{staticClass:"gift-title"},[t._v("以下奖品必须全部选择，否则无法上架")]),t._v(" "),i("div",{staticClass:"gift-table left0 width980"},[i("div",{staticClass:"table-th"},t._l(t.itemLIst,function(e){return i("div",{key:e.index,staticClass:"th-item"},[t._v(t._s(e.name))])})),t._v(" "),t._l(t.ruleForm.rules.beautiful,function(e){return i("div",{key:e.index,staticClass:"table-body"},[i("div",{staticClass:"body-gift-number body-item"},[i("div",{staticClass:"item-number"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.type_title,expression:"item.type_title"}],staticClass:"number-input",attrs:{type:"text"},domProps:{value:e.type_title},on:{input:function(i){i.target.composing||t.$set(e,"type_title",i.target.value)}}})])]),t._v(" "),i("div",{staticClass:"body-gift-number body-item"},[i("div",{staticClass:"item-number"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.gifts,expression:"item.gifts"}],staticClass:"number-input",attrs:{type:"text"},domProps:{value:e.gifts},on:{input:function(i){i.target.composing||t.$set(e,"gifts",i.target.value)}}})])]),t._v(" "),i("div",{staticClass:"body-gift-img body-item"},[i("div",{staticClass:"item-upload marking-upload"},[i("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/admin/fileupload/image","show-file-list":!1,"on-success":t.show_img.bind(null,{data:e}),data:e}},[e.gifts_img?i("img",{attrs:{width:"178px",src:e.gifts_img}}):i("div",{staticClass:"upload-img-icon"},[i("i",{staticClass:"el-icon-plus position-icon",staticStyle:{"font-size":"48px"}})])])],1)]),t._v(" "),i("div",{staticClass:"body-gift-number body-item"},[i("div",{staticClass:"item-number"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.gifts_num,expression:"item.gifts_num"}],staticClass:"number-input",attrs:{type:"text"},domProps:{value:e.gifts_num},on:{input:function(i){i.target.composing||t.$set(e,"gifts_num",i.target.value)}}})])])])})],2),t._v(" "),i("el-form",{ref:"ruleForm3",staticClass:"bottom-form",attrs:{model:t.ruleForm}},[i("el-form-item",{attrs:{label:"状态："}},[i("el-radio-group",{model:{value:t.ruleForm.activity_status,callback:function(e){t.$set(t.ruleForm,"activity_status",e)},expression:"ruleForm.activity_status"}},[i("el-radio",{attrs:{label:1}},[t._v("下架")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("上架")])],1)],1),t._v(" "),i("div",{staticClass:"finish"},[i("el-button",{attrs:{size:"large",type:"primary"},on:{click:function(e){t.goNextStep(1)}}},[t._v("上一步")]),t._v(" "),i("el-button",{attrs:{size:"large",type:"primary"},on:{click:t.submit}},[t._v("上架")])],1)],1)],1):t._e()])],1)])},staticRenderFns:[]};var c=i("VU/8")(o,n,!1,function(t){i("IlfG")},"data-v-ab32be6a",null);e.default=c.exports}});