webpackJsonp([144],{U1LP:function(e,t){},ggUt:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("bOdI"),i=s.n(a),n=s("gRE1"),l=s.n(n),r=s("fZjL"),u=s.n(r),o=s("0qDT"),c=s("PMOO"),p=s("tVcc"),d={data:function(){return{breadcrumb:[{name:"加盟商管理"},{name:"加盟商列表",url:"/business/alliance"}],user:JSON.parse(localStorage.user),dialog:!1,business_id:"",is_use:"",remark:"无",status_filter:"",tagsListGroup:{"选择类型:":[{title:"全部",key:"business_type",value:""},{title:"加盟",key:"business_type",value:1},{title:"非加盟",key:"business_type",value:2}],"选择状态:":[{title:"全部",key:"business_is_use",value:""},{title:"停用",key:"business_is_use",value:0},{title:"启用",key:"business_is_use",value:1}]},searchs:{list:[{type:"input-text",label:"加盟商名称",name:"business_name",value:"",placeholder:"加盟商名称"},{type:"input-text",label:"店长",name:"city",value:"",placeholder:""},{type:"input-singal-date",label:"开始时间",name:"start_time",value:""},{type:"input-singal-date",label:"结束时间",name:"end_time",value:""}]},url:"/api/admin/business/index",tableJson:{column:[{type:"text",align:"center",label:"加盟日期",prop:"business_ctime",width:""},{type:"text",align:"center",label:"公司名称",prop:"business_name",width:""},{type:"text",align:"center",label:"法人姓名/手机号",prop:"business_corporation",width:"200",formatter:function(e){return"<p style='text-align: center'>\n                                "+e.business_corporation+"<br/>\n                                "+e.business_phone+"\n                                                    </p>"}},{type:"text",align:"center",label:"类型",width:"",formatter:function(e){return 1==e.business_type?"加盟":"非加盟"}},{type:"text",align:"center",label:"公司地址",prop:"business_company_adress",width:"200"},{type:"text",align:"center",label:"推荐人平台账号",prop:"p_name"},{type:"text",align:"center",label:"状态",width:"",formatter:function(e){return'<div style="color:red">\n                                '+(0==e.business_is_use?"停用":"启用")+"\n                                </div>"}},{type:"switch_btn",label:"操作",align:"center",width:"50",prop:"business_is_use",value:["停用","启用"]},{type:"handle",label:"查看",align:"center",width:"",list:[{label:"修改",type:"edit",onClick:function(e,t,s){console.log(s,"row"),t.$router.push("/business/alliance_add/"+s.business_id)}},{label:"详情",type:"detail",onClick:function(e,t,s){t.$router.push("/business/alliance_detail/"+s.business_id)}}]}]}}},components:{NomalTable:o.a,TableSearch:c.a,BreadCrumb:p.a},beforeRouteUpdate:function(e,t,s){console.log(e.query),this.status_filter=u()(e.query)[0]+l()(e.query)[0],this.$refs.table.getData(e.query),s()},created:function(){},computed:{},methods:{listenSwitchChange:function(e){var t=e.value,s=t.business_id,a=t.business_is_use;console.log(a),this.business_id=s,this.is_use=1==a?0:1,console.log(this.is_use),this.dialog=!0},doUpdateIsUse:function(){var e=this,t={id:this.business_id,is_use:this.is_use,remark:this.remark};this.$axios.post("/api/admin/business/isUse",t).then(function(t){e.dialog=!1,console.log(t),0==t.data.code?(e.$alert("操作成功"+t.data.data),e.$refs.table.getData({is_page:1,page:1})):e.$alert("操作失败"+t.data.msg)}).catch(function(t){e.$alert("操作失败"+t)})},openModal:function(){console.log("openModal")},getData:function(e,t){this.$refs.table.getData(i()({},e,t))}}},b={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page"},[s("div",{staticClass:"page-header"},[s("div",{staticClass:"crumbs"},[s("bread-crumb",{attrs:{"bread-crumb":e.breadcrumb}})],1),e._v(" "),s("div",{staticClass:"page-header-actions"},[s("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(t){e.$router.push({path:"/audit/business"})}}},[e._v("加盟商审核")]),e._v(" "),s("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(t){e.$router.push({path:"/business/alliance_add"})}}},[e._v("添加加盟商")])],1)]),e._v(" "),s("div",{staticClass:"page-content"},[s("div",{staticClass:"filter-tag-box"},e._l(e.tagsListGroup,function(t,a,i){return s("div",{key:i,staticClass:"filter-tag-item"},[s("div",{staticClass:"tag-hd"},[e._v(e._s(a))]),e._v(" "),s("div",{staticClass:"tag-bd"},e._l(t,function(t,a){return s("router-link",{key:t.value,staticClass:"tag",class:t.key+t.value==e.status_filter?"active":"",attrs:{to:{path:"/business/alliance",query:(i={},i[t.key]=t.value,i)}}},[e._v("\n                        "+e._s(t.title))]);var i}))])})),e._v(" "),s("nomal-table",{ref:"table",attrs:{"table-json":e.tableJson,url:e.url},on:{listenSwitchChange:e.listenSwitchChange}},[s("table-search",{attrs:{searchs:e.searchs}})],1),e._v(" "),s("el-dialog",{attrs:{title:0==e.is_use?"停用":"启用",visible:e.dialog,width:"30%"},on:{"update:visible":function(t){e.dialog=t}}},[s("p",{staticStyle:{color:"red"}},[e._v("此操作会"+e._s(0==e.is_use?"停用":"启用")+"加盟商名下所有门店")]),e._v(" "),s("p",[e._v("操作人:"+e._s(e.user.data.user_realname))]),e._v(" "),s("p",[e._v("操作备注:")]),e._v(" "),s("p",[s("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入操作备注"},model:{value:e.remark,callback:function(t){e.remark=t},expression:"remark"}})],1),e._v(" "),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialog=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.doUpdateIsUse}},[e._v("确 定")])],1)])],1)])},staticRenderFns:[]};var _=s("VU/8")(d,b,!1,function(e){s("U1LP")},"data-v-2a3aa124",null);t.default=_.exports}});