webpackJsonp([91],{"0CWj":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("bOdI"),n=a.n(s),i=a("gRE1"),r=a.n(i),l=a("fZjL"),o=a.n(l),c=a("0qDT"),u=a("PMOO"),d={data:function(){return{status_filter:"",tagsListGroup:{"管理端是否接收:":[{title:"是",key:"business_on",value:1},{title:"否",key:"business_on",value:0}],"POS端是否接收:":[{title:"是",key:"pos_on",value:1},{title:"否",key:"pos_on",value:0}]},searchs:{list:[{type:"input-text",label:"标题",name:"title",value:"",placeholder:"标题"}]},url:"/api/admin/news/index",tableJson:{column:[{type:"text",align:"center",label:"创建时间",prop:"create_time",width:""},{type:"text",align:"center",label:"标题",prop:"title",width:""},{type:"text",align:"center",label:"通知类型",width:"",formatter:function(t){switch(t.type){case 1:return"重要通知";case 2:return"新品";case 3:return"优惠活动通知";case 4:return"公告";case 5:return"动态";default:return""}}},{type:"handle",label:"查看",align:"center",width:"",list:[{label:"编辑",type:"edit",onClick:function(t,e,a){console.log(a,"row"),e.$router.push("/admin/news/newsAdd/"+a.news_id)}},{label:"删除",type:"remove",onClick:function(t,e,a){console.log(a,"row"),e.removeNews(a.news_id)}}]}]}}},components:{NomalTable:c.a,TableSearch:u.a},beforeRouteUpdate:function(t,e,a){console.log(t.query),this.status_filter=o()(t.query)[0]+r()(t.query)[0],this.$refs.table.getData(t.query),a()},created:function(){},computed:{},methods:{listenSwitchChange:function(t){},removeNews:function(t){var e=this;this.$axios.post("/api/admin/news/remove",{id:t}).then(function(t){0==t.data.code?(e.$alert("删除成功"),e.$refs.table.getData({is_page:1,page:1})):e.$alert("操作失败"+t.data.msg)}).catch(function(t){e.$alert("操作失败"+t)})},getData:function(t,e){this.$refs.table.getData(n()({},t,e))}}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page"},[a("div",{staticClass:"page-header"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v("平台管理")]),t._v(" "),a("el-breadcrumb-item",{attrs:{to:{path:t.$route.path}}},[t._v(t._s(t.$route.meta.title))])],1)],1),t._v(" "),a("div",{staticClass:"page-header-actions"},[a("el-button",{attrs:{icon:"el-icon-plus",size:"mini",type:"primary"},on:{click:function(e){t.$router.push({path:"/admin/news/newsAdd"})}}},[t._v("添加")])],1)]),t._v(" "),a("div",{staticClass:"page-content"},[a("div",{staticClass:"filter-tag-box"},t._l(t.tagsListGroup,function(e,s,n){return a("div",{key:n,staticClass:"filter-tag-item"},[a("div",{staticClass:"tag-hd"},[t._v(t._s(s))]),t._v(" "),a("div",{staticClass:"tag-bd"},t._l(e,function(e,s){return a("router-link",{key:e.value,staticClass:"tag",class:e.key+e.value==t.status_filter?"active":"",attrs:{to:{path:"/admin/news/list",query:(n={},n[e.key]=e.value,n)}}},[t._v("\n                        "+t._s(e.title))]);var n}))])})),t._v(" "),a("nomal-table",{ref:"table",attrs:{"table-json":t.tableJson,url:t.url},on:{listenSwitchChange:t.listenSwitchChange}},[a("table-search",{attrs:{searchs:t.searchs}})],1)],1)])},staticRenderFns:[]};var v=a("VU/8")(d,p,!1,function(t){a("2f83")},"data-v-695f92ef",null);e.default=v.exports},"2f83":function(t,e){}});